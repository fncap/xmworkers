(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{faF7:function(i,n,t){"use strict";t.r(n),t.d(n,"WorkerConfigPageModule",function(){return y});var o=t("ofXK"),e=t("tyNb"),c=t("j1ZV"),a=t("mrSG"),r=t("fXoL"),d=t("owMh"),s=t("tjLH"),l=t("OuSN"),b=t("3Pt+"),f=t("pMdk"),g=t("1kSV"),h=t("6NWb");function u(i,n){if(1&i){const i=r.Rb();r.Qb(0,"div",9),r.Qb(1,"div",10),r.Qb(2,"textarea",11),r.ac("ngModelChange",function(n){return r.rc(i),r.cc().config=n})("ngModelChange",function(n){return r.rc(i),r.cc().configChange(n)}),r.Pb(),r.Pb(),r.Pb()}if(2&i){const i=r.cc();r.zb(2),r.Db("is-invalid",i.invalid),r.ic("ngModel",i.config)}}function p(i,n){1&i&&(r.Qb(0,"div",12),r.Mb(1,"fa-icon",13),r.Pb()),2&i&&(r.zb(1),r.ic("spin",!0))}function v(i,n){1&i&&(r.Qb(0,"div",14),r.Mb(1,"fa-icon",15),r.yc(2," Remote configuration is not available. "),r.Pb())}const w=[{path:"",component:(()=>{class i{constructor(i,n,t,o,e,c,a,r){this.runtime=i,this.events=n,this.ar=t,this.g=o,this.router=e,this.fb=c,this.api=a,this.modalService=r,this.loaded=!1,this.err=!0,this.invalid=!1}ngOnInit(){this.worker=this.runtime.viewing,this.getConfig()}getConfig(i=!1){return Object(a.a)(this,void 0,void 0,function*(){this.loaded=!1,this.api.call(`${this.worker.url}/1/config`,this.worker.token).then(n=>{i?this.g.download(JSON.stringify(n,null,2),"config.json","application/json"):(this.config=JSON.stringify(n,null,2),this.err=!1)},i=>{console.error(i),this.err=!0}).finally(()=>this.loaded=!0)})}download(){this.getConfig(!0)}configChange(i){this.invalid=!this.g.isJSON(i)}apply(){this.loaded=!1,this.api.call(`${this.worker.url}/1/config`,this.worker.token,JSON.parse(this.config),"PUT","application/json").then(i=>{console.log(i),this.g.toast("Configuration successfully applied.","Success!","success")},i=>{this.g.toast("Failed to apply configuration.","Oh!","error")}).finally(()=>this.loaded=!0)}}return i.\u0275fac=function(n){return new(n||i)(r.Lb(d.a),r.Lb(s.a),r.Lb(e.a),r.Lb(l.a),r.Lb(e.c),r.Lb(b.b),r.Lb(f.a),r.Lb(g.a))},i.\u0275cmp=r.Fb({type:i,selectors:[["app-worker-config"]],decls:12,vars:11,consts:[[1,"card","mb-3"],[1,"card-header"],[1,"btn","btn-secondary","float-right",3,"disabled","click"],["icon","download"],[1,"btn","btn-primary","float-right","mr-2",3,"disabled","click"],["icon","check"],["class","card-body",4,"ngIf"],["class","card-body text-muted text-center",4,"ngIf"],["class","card-body text-danger",4,"ngIf"],[1,"card-body"],[1,"form-group","mb-0"],["rows","16","spellcheck","false",1,"form-control","text-monospace",3,"ngModel","ngModelChange"],[1,"card-body","text-muted","text-center"],["icon","spinner","size","3x",3,"spin"],[1,"card-body","text-danger"],["icon","exclamation-triangle"]],template:function(i,n){1&i&&(r.Qb(0,"div",0),r.Qb(1,"h5",1),r.yc(2," JSON configuration "),r.Qb(3,"button",2),r.ac("click",function(){return n.download()}),r.Mb(4,"fa-icon",3),r.yc(5," Download "),r.Pb(),r.Qb(6,"button",4),r.ac("click",function(){return n.apply()}),r.Mb(7,"fa-icon",5),r.yc(8," Apply "),r.Pb(),r.Pb(),r.wc(9,u,3,3,"div",6),r.wc(10,p,2,1,"div",7),r.wc(11,v,3,0,"div",8),r.Pb()),2&i&&(r.Db("border-danger",n.loaded&&(n.err||n.invalid)),r.zb(1),r.Db("text-white",n.loaded&&(n.err||n.invalid))("bg-danger",n.loaded&&(n.err||n.invalid)),r.zb(2),r.ic("disabled",!n.loaded||n.err||n.invalid),r.zb(3),r.ic("disabled",!n.loaded||n.err||n.invalid),r.zb(3),r.ic("ngIf",n.loaded&&!n.err),r.zb(1),r.ic("ngIf",!n.loaded),r.zb(1),r.ic("ngIf",n.loaded&&n.err))},directives:[h.b,o.k,b.a,b.h,b.j],styles:[".s[_ngcontent-%COMP%]{margin-right:4px}"]}),i})()}];let y=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=r.Jb({type:i}),i.\u0275inj=r.Ib({imports:[[o.c,c.a,b.e,b.m,e.e.forChild(w)]]}),i})()}}]);